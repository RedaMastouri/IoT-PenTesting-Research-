# IoT Camera Hack | Exercise 01

## Summary

This exercise investigates the fundamentals of exploiting an IoT device by using a known vulnerability from the public Internet.

The following are learning objectives that you will gain from completing this exercise:

* Understand the basics of interacting with an IoT device
* Brute forcing web-based authentication interfaces
* Leveraging a vulnerability to remotely gain access to an IoT device

## Instructions

1. Start up the _Kali VM_ or the machine that you will use to launch an attack<a href="#foot1"><sup>1</sup></a>

2. Open a _Terminal_ and type `ifconfig` in the _Kali VM_

3. At this point, you are looking at the networking information for the _Kali VM_. The most important segment in the _Terminal_ output is the _inet_ value for _eth0_

    **Question:** What is the IP Address for eth0? (It should be a numeric format separated by periods such as 192.168.1.10 or 10.200.1.3)

    Write down the IP Address for eth0: ________________________________________

4. Open a web browser and navigate to the camera's web interface <a href="#foot2"><sup>2</sup></a>

5. You should see a GeoVision web page with a Login and Password prompt

6. Unfortunately, we don’t know the password to the Login interface however, brute forcing is a common technique to gain access!

7. We provided a file called `darkweb2017-top100.txt` in the GitHub repository which contains the top 100 most common passwords. Open the file to view the list. Hopefully, none of the passwords are yours!

8. Now let’s try brute forcing the login interface to access the camera. Often, manually guessing a username and password is time-consuming and tedious. A hacker would traditionally script or program a way to automatically guess the username and password. For your convenience, we have created a brute force script called `GeoVisionBruteForcerScript.py` for you to run. Open a _Terminal_ and run the script with the following command:

    ```bash
    python GeoVisionBruteForcerScript.py --ip <Camera IP>\
    --password_list darkweb2017-top100.txt > output.txt
    ```

9. The previous command created an output.txt file that shows the behaviors and responses to each brute force attempt. Open the output.txt file and you’ll see the results of each attempt. Look for a response that differs from the others. Which one was this?

    Hint: Look for a line with the phrase Set-Cookie in it!

10. Alternatively, there is a publicly accessible exploit to change the administrator username and password for this camera. To launch this exploit, go back to the _Terminal_ window and type the following command:

    ```bash
    curl -v http://<Camera IP>/UserCreat.cgi?admin_username=root\&\ admin_passwordNew=HACKED
    ```

11. If you see _HTTP/1.1 302 Found_ and _Location: ssl.cgi/Login.htm_, try to login to the camera with the username _root_ and the password _HACKED_

12. Were you successful? If not, repeat the previous two steps and try again! 

13. You are probably wondering how did this work? What happened is that this particular IoT camera has a web vulnerability that allows any user to remotely change the username and password on the device without logging into the system. Fortunately, the vendor has resolved this particular issue and released a patch to the public, but we didn’t update this camera because we wanted to show you this demonstration!

Footnotes
=========
<a id="foot1" href="#foot1"><sup>[1]</sup></a> The reminder of this and subsequent exercises will refer the machine that you use to launch attacks as the Kali VM

<a id="foot2" href="#foot2"><sup>[2]</sup></a> The remainder of this and subsequent exercises will refer the IP address of the camera as `<Camera IP>` where the angle brackets are __not__ included in the step